<!DOCTYPE html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<html>
<style>
  * {
    padding: 0;
    margin: 0;
  }

  table {
    margin: 15px;
  }

  table,
  th,
  td {
    border: 1px solid black;
    border-collapse: collapse;
    padding: 5px 10px;
    text-align: left;
  }

  input,
  select {
    width: 90%;
    border: 0;
  }

  input:focus-visible,
  select:focus-visible {
    outline: none;
  }

  .layer {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 450px;
    height: 450px
  }

  #controlLayer {
    visibility: visible;
  }

  .layer2 {
    position: absolute;
    left: 450px;
    top: 0px;
    width: 450px;
    height: 450px
  }

  #controlLayer {
    visibility: visible;
  }

  .layer3 {
    position: absolute;
    left: 0px;
    top: 350px;
    width: 450px;
    height: 450px
  }

  #controlLayer {
    visibility: visible;
  }

  .layer4 {
    position: absolute;
    left: 450px;
    top: 350px;
    width: 450px;
    height: 450px
  }

  #controlLayer {
    visibility: visible;
  }
</style>

<body>

  <body style="background-color:white;">
    <div style="background-color: rgb(25, 197, 249);padding: 7px;">
      <h5 style="text-align: center;">Layout P&R Dashboard</h5>
    </div>

    <div style="display: flex;">
      <div style="width: 30%;">
        <table style="width: 90%;">
          <thead>
            <tr>
              <th>Reference_Cell</th>
              <th><input placeholder="user_provided_input_cell" /></th>
            </tr>
          </thead>
          <tr>
            <td>library</td>
            <td>
              <select name="All" id="#">
                <option value="All">All</option>
                <option value="g1i">g1i</option>
                <option value="h0m">h0m</option>
                <option value="g1m">g1m</option>
                <option value="b0m">b0m</option>
                <option value="b15">b15</option>
                <option value="ec0">ec0</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>family</td>
            <td>
              <select name="All" id="#">
                <option value="All">All</option>
                <option value="inv000a">inv000a</option>
                <option value="and002a">and002a</option>
                <option value="aoi012a">aoi012a</option>
                <option value="aoi013a">aoi013a</option>
                <option value="oai012a">oai012a</option>
                <option value="oai013a">oai013a</option>
              </select>
            </td>
          </tr>

          <tr>
            <td>Cells</td>
            <td>
              <select name="cells" id="cells">
                <optgroup label="drive">
                  <option value="g1iinv000at1n01x1">g1iinv000at1n01x1</option>
                  <option value="g1iinv000at1n02x5">g1iinv000at1n02x5</option>
                  <option value="g1iinv000at1n04x5">g1iinv000at1n04x5</option>
                  <option value="g1iinv000at1n06x5">g1iinv000at1n06x5</option>
                  <option value="g1iinv000at1n08x5">g1iinv000at1n08x5</option>
                  <option value="g1iinv000at1n10x5">g1iinv000at1n10x5</option>
                  <option value="g1iinv000at1n12x5">g1iinv000at1n12x5</option>
                  <option value="g1iinv000at1n16x5">g1iinv000at1n16x5</option>
                  <option value="g1iinv000at1n20x5">g1iinv000at1n20x5</option>
                  <option value="g1iinv000at1n24x5">g1iinv000at1n24x5</option>
                </optgroup>
                <optgroup label="logic_relation">
                  <option value="g1iinv000at1d28x5">g1iinv000at1d28x5</option>
                  <option value="g1iinv000at1d32x5">g1iinv000at1d32x5</option>
                  <option value="g1iinv000at1d40x5">g1iinv000at1d40x5</option>
                </optgroup>
              </select>
            </td>
          </tr>

        </table>

        <table style="width: 90%;margin-top: 50px; position:relative" id="layer_table">

        </table>
      </div>

      <div style="width: 90%;margin-top: 50px; position:relative" id="layers_chart">
      </div>
    </div>


    <script>

      let data = [];
      const layers = ["FTI___368", "b210h50pRegion___1326", "devflav___1008", "m0___258", "m1___4", "m2___14", "nwell___11", "polyCR___757", "poly___2", "pwell___109", "sliEM0B___735", "sliEM0S___737", "sliEM1___738", "tcn___15"];
      let root_dir = "/nfs/sc/disks/sc_dcf_pld_2018037/vnathca/2021/layout_manipulation/data_extraction/Layout_images/";
      let lib = "g1i";
      let family = "inv000at1n";
      let drive1 = "02x5";
      let drive2 = "04x5";
      let drive3 = "12x5";
      let drive4 = "24x5";

      for (let i = 0; i < layers.length; i++) {
        data[i] = {
          id: i,
          name: layers[i],
          image: root_dir + lib + family + drive1 + "/" + layers[i] + ".svg",
          image2: root_dir + lib + family + drive2 + "/" + layers[i] + ".svg",
          image3: root_dir + lib + family + drive3 + "/" + layers[i] + ".svg",
          image4: root_dir + lib + family + drive4 + "/" + layers[i] + ".svg"
        };
      }

      var layerTable = document.getElementById("layer_table");
      let htmlString = `<tr>
		          <th style="width: 50%;">Layers</th>
              <th style="width: 50%;">Visibility</th>
             </tr>`;
      for (let i = 0; i < data.length; i++) {
        htmlString += `<tr>
							<td>${data[i].name}</td>
							<td>
								<input type="checkbox" class="layer-selector" id="layer_${data[i].id}" img_url="${data[i].image}" img_url2="${data[i].image2}" img_url3="${data[i].image3}" img_url4="${data[i].image4}"/>
							</td>
						</tr>`
      }
      console.log('htmlString', htmlString);
      $("#layer_table").html(htmlString)  // adding dynamic html

      $('input.layer-selector').on('change', function () {
        if (this.checked) {
          console.log("I am check" + this.id + $("#" + this.id).attr("img_url"));
          addLayer(this.id, this.id + 1, this.id + 2, this.id + 3, $("#" + this.id).attr("img_url"), $("#" + this.id).attr("img_url2"), $("#" + this.id).attr("img_url3"), $("#" + this.id).attr("img_url3"));
        }
        else {
          console.log("I am remove" + this.id + $("#" + this.id).attr("img_url"));
          removeLayer(this.id, this.id + 1, this.id + 2, this.id + 3);
        }
      });

      function addLayer(id, id2, id3, id4, imageUrl, imageUrl2, imageUrl3, imageUrl4) {
        let htmlString = `<embed id="layer_image_${id}" class="layer" src="${imageUrl}" />`
        let htmlString2 = `<embed id="layer_image_${id2}" class="layer2" src="${imageUrl2}" />`
        let htmlString3 = `<embed id="layer_image_${id3}" class="layer3" src="${imageUrl3}" />`
        let htmlString4 = `<embed id="layer_image_${id4}" class="layer4" src="${imageUrl4}" />`
        console.log('htmlString', htmlString, htmlString2)
        $("#layers_chart").append(htmlString)
        $("#layers_chart").append(htmlString2)
        $("#layers_chart").append(htmlString3)
        $("#layers_chart").append(htmlString4)
      }

      function removeLayer(id, id2, id3, id4) {
        $('#layer_image_' + id).remove();
        $('#layer_image_' + id2).remove();
        $('#layer_image_' + id3).remove();
        $('#layer_image_' + id4).remove();
      }

    </script>
  </body>

</html>